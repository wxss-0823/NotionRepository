# PHP 教程

## 1. PHP 基础

### 1.1. 语法

#### 1.1.1. 基本的 PHP 语法

​	PHP 脚本可以放在文档中的任何位置。PHP 脚本以 `<?php` 开始，以 `?>` 结束：

```php
<?php
// PHP 代码
?>
```

#### 1.1.2. PHP 中的注释

```php+HTML
<!DOCTYPE html>
<html>
<body>

<?php
// 这是 PHP 单行注释

/*
	这是
	PHP 多行
	注释
*/
?>

</body>
</html>
```

### 1.2. 变量

#### 1.2.1. 变量规则

- 变量以 `$` 符号开始，后面跟着变量的名称；
- 变量名必须以字母或者下划线字符开始；
- 变量名只能包含字母、数字以及下划线（A-z、0-9 和 _ ）；
- 变量名不能包含空格；
- 变量名是区分大小写的（`$y` 和 `$Y` 是两个不同的变量）。

#### 1.2.2. 创建（声明）变量

​	PHP 没有声明变量的命令，变量在第一次赋值给它的时候被创建。

```php
<?php 
  $txt="Hello world!"; 
	$x=5; 
	$y=10.5; 
?>
```

#### 1.2.3. 弱类型语言

​	在创建变量时，不必向 PHP 声明该变量的数据类型，PHP 会根据变量的值，自动把变量转换为正确的数据类型。

#### 1.2.4. 变量作用域

​	变量的作用域是脚本中变量可被引用/使用的部分，PHP 有四种不同的变量作用域：`local`，`global`，`static`，`parameter`。

##### 局部 & 全局作用域

​	在所有函数外部定义的变量，拥有**全局作用域**。除了函数外，全局变量可以被脚本中的任何部分访问；在 PHP 函数内部声明的变量是**局部变量**，仅能在函数内部访问。如果需要在一个函数中访问一个全局变量，需要使用 `global` 关键字。

​	PHP 将所有全局变量存储在一个名为 `$GLOBALS[index]` 的数组中。 `index` 保存变量的名称。这个数组可以在函数内部访问，也可以直接用来更新全局变量。

```php
<?php
  $x = 5;
	$y = 10;
	function test()
  {
    // 使用 global 关键字访问
    global $x;
    echo $x;
    // 使用 GLOBALS 数组访问
    echo $GLOBALS['x'];
	}
	
	test();
?>
```

#### 1.2.5. Static 作用域

​	当一个函数完成时，它的所有局部变量通常都会被删除。而使用 `static` 关键字声明的变量，在函数完成时不会被删除，下一次调用时会保留上一次函数执行的局部变量。

### 1.3. echo 和 print 语句

#### 1.3.1. echo 语句

​	是一个语言结构，使用的时候可以加上括号，也可以不加。

##### 显示字符串

```php
<?php
echo "xxx", "yyy", "zzz";
?>
```

##### 显示变量

```php
<?php
$txt1 = "xxx";
echo $txt1;
?>
```

#### 1.3.2. print 语句

​	同样是一个语句结构，也可以使用或者不适用括号。

##### 显示字符串

```php
<?php
print "xxx";
?>
```

##### 显示变量

```php
<?php
$txt1 = "xxx";
print $txt1;
?>
```

#### 1.3.3. 对比

​	`echo` 和 `print` 区别:

- `echo` ：可以输出一个或多个字符串；
- `print` ：只允许输出一个字符串，返回值总为 1 。

**提示：**`echo` 输出的速度比 `print` 快， `echo` 没有返回值，`print` 有返回值 1 。

### 1.4. EOF（heredoc）

​	EOF（heredoc）是一种在命令行shell（如 sh、csh、ksh、bash、PowerShell 和 zsh）和程序语言（像Perl、PHP、Python 和 Ruby）里定义一个字符串的方法。

```php
<?php
echo <<<EOF
	<h1>标题</h1>
  <p>段落</p>
EOF;
//结束需要独立一行且前后不能有空格
?>
```

**注意：**

- 以 `<<<EOF` 开始标记开始，以 `EOF` 结束标记结束，结束标记必须顶头写，不能有缩进和空格，且在结束标记末尾要有分号 ；

- 开始标记和结束标记相同，比如常用大写的 `EOT`、`EOD`、`EOF` 来表示，但是不只限于那几个（也可以用：JSON、HTML 等），只要保证开始标记和结束标记不在正文中出现即可；

- 位于开始标记和结束标记之间的变量可以被正常解析，但是**函数则不可以**，在 heredoc 中，变量不需要用连接符 `.` 或 `,` 来拼接。

### 1.5. 数据类型

#### 1.5.1. 字符串

​	一串字符的序列，可以将文本放在单引号或双引号中。

#### 1.5.2. 整型

​	没有小数的数字。

```php
<?php
$x = 0x8c; // 十六进制数
$y = 047; // 八进制数
?>
```

#### 1.5.3. 浮点型

​	带小数部分的数字，或是指数形式。

```php
<?php
$x = 10.012;
$y = 2.4e3;
$z = 8E-5;
?>
```

#### 1.5.4. 布尔型

​	布尔型可以是 `true` 或 `false`。

#### 1.5.5. 数组

​	数组可以在一个变量中存储多个值。

```php
<?php
$cars = array("Volvo", "BMW", "Toyota");
?>
```

#### 1.5.6. 对象

​	在 PHP 中，对象必须声明，使用class关键字声明类对象，类是可以包含属性和方法的结构。然后在类中定义数据类型，最后在实例化的类中使用数据类型。

#### 1.5.7. NULL 值

​	`null` 值表示变量没有值，其数据类型为 `null`，可以通过设置变量值为 `null` 来清空变量数据。

#### 1.5.8. 资源类型

​	PHP 资源 `resource` 是一种特殊变量，保存了到外部资源的一个引用。常见资源数据类型有打开文件、数据库连接、图形画布区域等。由于资源类型变量保存有打开文件、数据库连接、图形画布区域等的特殊句柄，因此将其它类型的值转换为资源没有意义。

```php
get_resource_type(resource $handle): string
```

​	此函数返回一个字符串，用于表示传递给它的 `resource` 的类型。如果参数不是合法的 `resource`，将产生错误。

### 1.6. 类型比较

​	虽然 PHP 是弱类型语言，但也需要明白变量类型及它们的意义，PHP 变量比较包含松散和严格比较。

- **松散比较：**使用两个等号 `==` 比较，只比较值，不比较类型；
- **严格比较：**用三个等号 `===` 比较，除了比较值，也比较类型。

### 1.7. 常量

​	PHP 中的常量是指一旦定义后其值不能被改变的标识符，其值被定义后，在脚本的其他任何地方都不能被改变，可以用 `define()` 函数或 `const` 关键字来定义。

#### 1.7.1. define 关键字

```php
bool define (string $name, mixed $value [, bool $case_insensitive = false])
```

- `name`：必选参数，常量名称，即标识符；
- `value`：必选参数，常量的值；
- `case_insensitive`：可选参数，默认为 `false` ，如果设置为 `true`，该常量大小写不敏感。

#### 1.7.2. const 关键字

```php
const CONSTANT_NAME = "value";
```

#### 1.7.3. 预定义变量

​	PHP 提供了一些预定义变量，可以在脚本中直接使用，这些变量通常用于获取 PHP 的配置信息、版本信息等。常见的预定义变量有：

- `PHP_version`：当前 PHP 解析器的版本；
- `PHP_OS`：服务器的操作系统；
- `PHP_INT_MAX`：最大的整数值；
- `E_ERROR`、`E_WARNING`、`E_PARSE`：错误报告等级。

#### 1.7.4. 常量数组

​	将多个常量定义为数组的格式。

```php
define("FRUITS", [
  "Apple",
  "Banana",
  "Orange"
]);
echo FRUITS[0];	// 输出 "Apple"

// 或者使用const
const COLORS = ([
  "Red",
  "Green",
  "Blue"
]);
echo COLORS[0]	// 输出 "Red"
```









