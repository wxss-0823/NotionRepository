# PHP 教程

## 1. PHP 基础

### 1.1. 语法

#### 1.1.1. 基本的 PHP 语法

​	PHP 脚本可以放在文档中的任何位置。PHP 脚本以 `<?php` 开始，以 `?>` 结束：

```php
<?php
// PHP 代码
?>
```

#### 1.1.2. PHP 中的注释

```php+HTML
<!DOCTYPE html>
<html>
<body>

<?php
// 这是 PHP 单行注释

/*
	这是
	PHP 多行
	注释
*/
?>

</body>
</html>
```

### 1.2. 变量

#### 1.2.1. 变量规则

- 变量以 `$` 符号开始，后面跟着变量的名称；
- 变量名必须以字母或者下划线字符开始；
- 变量名只能包含字母、数字以及下划线（A-z、0-9 和 _ ）；
- 变量名不能包含空格；
- 变量名是区分大小写的（`$y` 和 `$Y` 是两个不同的变量）。

#### 1.2.2. 创建（声明）变量

​	PHP 没有声明变量的命令，变量在第一次赋值给它的时候被创建。

```php
<?php 
  $txt="Hello world!"; 
	$x=5; 
	$y=10.5; 
?>
```

#### 1.2.3. 弱类型语言

​	在创建变量时，不必向 PHP 声明该变量的数据类型，PHP 会根据变量的值，自动把变量转换为正确的数据类型。

#### 1.2.4. 变量作用域

​	变量的作用域是脚本中变量可被引用/使用的部分，PHP 有四种不同的变量作用域：`local`，`global`，`static`，`parameter`。

##### 局部 & 全局作用域

​	在所有函数外部定义的变量，拥有**全局作用域**。除了函数外，全局变量可以被脚本中的任何部分访问；在 PHP 函数内部声明的变量是**局部变量**，仅能在函数内部访问。如果需要在一个函数中访问一个全局变量，需要使用 `global` 关键字。

​	PHP 将所有全局变量存储在一个名为 `$GLOBALS[index]` 的数组中。 `index` 保存变量的名称。这个数组可以在函数内部访问，也可以直接用来更新全局变量。

```php
<?php
  $x = 5;
	$y = 10;
	function test()
  {
    // 使用 global 关键字访问
    global $x;
    echo $x;
    // 使用 GLOBALS 数组访问
    echo $GLOBALS['x'];
	}
	
	test();
?>
```

#### 1.2.5. Static 作用域

​	当一个函数完成时，它的所有局部变量通常都会被删除。而使用 `static` 关键字声明的变量，在函数完成时不会被删除，下一次调用时会保留上一次函数执行的局部变量。

### 1.3. echo 和 print 语句

#### 1.3.1. echo 语句

​	是一个语言结构，使用的时候可以加上括号，也可以不加。

##### 显示字符串

```php
<?php
echo "xxx", "yyy", "zzz";
?>
```

##### 显示变量

```php
<?php
$txt1 = "xxx";
echo $txt1;
?>
```

#### 1.3.2. print 语句

​	同样是一个语句结构，也可以使用或者不适用括号。

##### 显示字符串

```php
<?php
print "xxx";
?>
```

##### 显示变量

```php
<?php
$txt1 = "xxx";
print $txt1;
?>
```

#### 1.3.3. 对比

​	`echo` 和 `print` 区别:

- `echo` ：可以输出一个或多个字符串；
- `print` ：只允许输出一个字符串，返回值总为 1 。

**提示：**`echo` 输出的速度比 `print` 快， `echo` 没有返回值，`print` 有返回值 1 。

### 1.4. EOF（heredoc）

​	EOF（heredoc）是一种在命令行shell（如 sh、csh、ksh、bash、PowerShell 和 zsh）和程序语言（像Perl、PHP、Python 和 Ruby）里定义一个字符串的方法。

```php
<?php
echo <<<EOF
	<h1>标题</h1>
  <p>段落</p>
EOF;
//结束需要独立一行且前后不能有空格
?>
```

**注意：**

- 以 `<<<EOF` 开始标记开始，以 `EOF` 结束标记结束，结束标记必须顶头写，不能有缩进和空格，且在结束标记末尾要有分号 ；

- 开始标记和结束标记相同，比如常用大写的 `EOT`、`EOD`、`EOF` 来表示，但是不只限于那几个（也可以用：JSON、HTML 等），只要保证开始标记和结束标记不在正文中出现即可；

- 位于开始标记和结束标记之间的变量可以被正常解析，但是**函数则不可以**，在 heredoc 中，变量不需要用连接符 `.` 或 `,` 来拼接。

### 1.5. 数据类型

#### 1.5.1. 字符串

​	一串字符的序列，可以将文本放在单引号或双引号中。

#### 1.5.2. 整型

​	没有小数的数字。

```php
<?php
$x = 0x8c; // 十六进制数
$y = 047; // 八进制数
?>
```

#### 1.5.3. 浮点型

​	带小数部分的数字，或是指数形式。

```php
<?php
$x = 10.012;
$y = 2.4e3;
$z = 8E-5;
?>
```

#### 1.5.4. 布尔型

​	布尔型可以是 `true` 或 `false`。

#### 1.5.5. 数组

​	数组可以在一个变量中存储多个值。

```php
<?php
$cars = array("Volvo", "BMW", "Toyota");
?>
```

#### 1.5.6. 对象

​	在 PHP 中，对象必须声明，使用class关键字声明类对象，类是可以包含属性和方法的结构。然后在类中定义数据类型，最后在实例化的类中使用数据类型。

#### 1.5.7. NULL 值

​	`null` 值表示变量没有值，其数据类型为 `null`，可以通过设置变量值为 `null` 来清空变量数据。

#### 1.5.8. 资源类型

​	PHP 资源 `resource` 是一种特殊变量，保存了到外部资源的一个引用。常见资源数据类型有打开文件、数据库连接、图形画布区域等。由于资源类型变量保存有打开文件、数据库连接、图形画布区域等的特殊句柄，因此将其它类型的值转换为资源没有意义。

```php
get_resource_type(resource $handle): string
```

​	此函数返回一个字符串，用于表示传递给它的 `resource` 的类型。如果参数不是合法的 `resource`，将产生错误。

### 1.6. 类型比较

​	虽然 PHP 是弱类型语言，但也需要明白变量类型及它们的意义，PHP 变量比较包含松散和严格比较。

- **松散比较：**使用两个等号 `==` 比较，只比较值，不比较类型；
- **严格比较：**用三个等号 `===` 比较，除了比较值，也比较类型。

### 1.7. 常量

​	PHP 中的常量是指一旦定义后其值不能被改变的标识符，其值被定义后，在脚本的其他任何地方都不能被改变，可以用 `define()` 函数或 `const` 关键字来定义。

#### 1.7.1. define 关键字

```php
bool define (string $name, mixed $value [, bool $case_insensitive = false])
```

- `name`：必选参数，常量名称，即标识符；
- `value`：必选参数，常量的值；
- `case_insensitive`：可选参数，默认为 `false` ，如果设置为 `true`，该常量大小写不敏感。

#### 1.7.2. const 关键字

```php
const CONSTANT_NAME = "value";
```

#### 1.7.3. 预定义变量

​	PHP 提供了一些预定义变量，可以在脚本中直接使用，这些变量通常用于获取 PHP 的配置信息、版本信息等。常见的预定义变量有：

- `PHP_version`：当前 PHP 解析器的版本；
- `PHP_OS`：服务器的操作系统；
- `PHP_INT_MAX`：最大的整数值；
- `E_ERROR`、`E_WARNING`、`E_PARSE`：错误报告等级。

#### 1.7.4. 常量数组

​	将多个常量定义为数组的格式。

```php
define("FRUITS", [
  "Apple",
  "Banana",
  "Orange"
]);
echo FRUITS[0];	// 输出 "Apple"

// 或者使用const
const COLORS = ([
  "Red",
  "Green",
  "Blue"
]);
echo COLORS[0]	// 输出 "Red"
```

### 1.8. 字符串变量

​	用于包含有字符的值，通过 `""` 标识。

#### 1.8.1. 并置运算符

​	并置运算符 `.` 用于将两个字符串连接。

#### 1.8.2. strlen() 函数

​	返回字符串的长度（字节数）。

#### 1.8.3. strpos() 函数

​	用于在字符串内查找一个字符或一段指定的文本，如果找到匹配，则返回第一个匹配字符的位置。

```php
strpos("xxx", "xx");	// 结果为 0
```

### 1.9. 运算符

#### 1.9.1. 算术运算符

| 运算符 | 描述       |
| :----- | :--------- |
| `+`    | 两数之和   |
| `-`    | 两数之差   |
| `*`    | 两数之积   |
| `/`    | 两数之商   |
| `%`    | 取余       |
| `-`    | 取负       |
| `~`    | 取反       |
| `.`    | 并置字符串 |

#### 1.9.3. 赋值运算符

| 运算符 | 描述       |
| :----- | :--------- |
| `=`    | 赋值       |
| `+=`   | 加         |
| `-=`   | 减         |
| `*=`   | 乘         |
| `/=`   | 除         |
| `%=`   | 模         |
| `.=`   | 并置字符串 |

#### 1.9.4. 递增/递减运算符

| 运算符 | 描述                |
| :----- | ------------------- |
| `++ x` | x 加 1，然后返回 x  |
| `x ++` | 返回 x，然后 x 加 1 |
| `-- x` | x 减 1，然后返回 x  |
| `x --` | 返回 x，然后 x 减 1 |

#### 1.9.5. 比较运算符

| 运算符    | 描述                                           |
| :-------- | :--------------------------------------------- |
| `x == y`  | 如果 x 等于 y，则返回 true                     |
| `x === y` | 如果 x 等于 y，且它们类型相同，则返回 true     |
| `x != y`  | 如果 x 不等于 y，则返回 true                   |
| `x <> y`  | 如果 x 不等于 y，则返回 true                   |
| `x !== y` | 如果 x 不等于 y，或它们类型不相同，则返回 true |
| `x > y`   | 如果 x 大于 y，则返回 true                     |
| `x < y`   | 如果 x 小于 y，则返回 true                     |
| `x >= y`  | 如果 x 大于或者等于 y，则返回 true             |
| `x <= y`  | 如果 x 小于或者等于 y，则返回 true             |

#### 1.9.6. 逻辑运算符

| 运算符    | 描述                                         |
| :-------- | :------------------------------------------- |
| `x and y` | 如果 x 和 y 都为 true，则返回 true           |
| `x or y`  | 如果 x 和 y 至少有一个为 true，则返回 true   |
| `x xor y` | 如果 x 和 y 有且仅有一个为 true，则返回 true |
| `x && y`  | 如果 x 和 y 都为 true，则返回 true           |
| `x || y`  | 如果 x 和 y 至少有一个为 true，则返回 true   |
| `! x`     | 如果 x 不为 true，则返回 true                |

#### 1.9.7. 数组运算符

| 运算符    | 描述                                                         |
| :-------- | :----------------------------------------------------------- |
| `x + y`   | x 和 y 的集合                                                |
| `x == y`  | 如果 x 和 y 具有相同的键/值对，则返回 true                   |
| `x === y` | 如果 x 和 y 具有相同的键/值对，且顺序相同类型相同，则返回 true |
| `x != y`  | 如果 x 不等于 y，则返回 true                                 |
| `x <> y`  | 如果 x 不等于 y，则返回 true                                 |
| `x !== y` | 如果 x 不等于 y，则返回 true                                 |

#### 1.9.8. 三元运算符

```php
(expr1) ? (expr2) : (expr3) 
```

#### 1.9.9. 组合比较符

​	PHP7+ 支持组合比较符（combined comparison operator），也称之为太空船操作符，符号为 `<=>`。组合比较运算符可以轻松实现两个变量的比较，当然不仅限于数值类数据的比较。

```php
$c = $a <=> $b;
```

- 如果 `$a > $b`, 则 `$c` 的值为 1；
- 如果 `$a == $b`, 则 `$c` 的值为 0；
- 如果 `$a < $b`, 则 `$c` 的值为 -1。

### 1.10. If...Else 语句

#### 1.10.1. if 语句

```php
if (condtion1)
{
    if // 条件成立时执行的代码
}
elseif (condition2)
{
    elseif // 条件成立时执行的代码
}
else
{
    // 条件不成立时执行的代码
}
```

### 1.11. Switch 语句

```php
<?php 
switch (expression) {
  case value1:        
    // 代码块1        break;    
  case value2:        
    // 代码块2        break;    
  // 更多的 case 语句    
  default:        
    // 如果没有匹配的值 
} 
?>
```

- `expression`：被比较的表达式；
- `case value`：可能的值，如果 `expression` 的值等于某个 `case` 的值，就执行相应的代码块；
- `break`：用于终止 `switch` 语句，防止继续执行下一个 `case`；
- `default`：可选的，用于指定当没有匹配的 `case` 时执行的代码块。

### 1.12. 数组

#### 1.12.1. 创建数组

```php
array();
```

- **数值数组**：带有数字 ID 键的数组；
- **关联数组**：带有指定的键的数组，每个键关联一个值；
- **多维数组**：包含一个或多个数组的数组。

#### 1.12.2. 获取数组长度

​	`count()` 函数用于返回数组长度。

#### 1.12.3. 创建关联数组

```php
array("key1"=>"value1","key2"=>"value2","key3"=>"value3");
```

#### 1.12.4. 遍历数组

##### 遍历数值数组

```php
for($x=0;$x<$arrlength;$x++)
{
    echo $array_name[$x];
}
```

##### 遍历关联数组

```php
foreach($age as $x=>$x_value)
{
    echo "Key=" . $x . ", Value=" . $x_value;
}
```

### 1.13. 数组排序

- `sort()`：对数组进行升序排列；
- `rsort()`：对数组进行降序排列；
- `asort()`：根据关联数组的值，对数组进行升序排列；
- `ksort()`：根据关联数组的键，对数组进行升序排列；
- `arsort()`：根据关联数组的值，对数组进行降序排列；
- `krsort()`：根据关联数组的键，对数组进行降序排列。

### 1.14. 超级全局变量

​	PHP 中预定义了几个超级全局变量（superglobals），这意味着它们在一个脚本的全部作用域中都可用，而不需要特别说明。

#### 1.14.1. $GLOBALS

​	`$GLOBALS` 是一个包含了全部变量的全局组合数组，变量的名字就是数组的键。

#### 1.14.2. $_SERVER

​	`$_SERVER` 是一个包含了诸如头信息（header）、路径（path）、以及脚本位置（script locations）等等信息的数组。这个数组中的项目由 Web 服务器创建，不能保证每个服务器都提供全部项目，服务器可能会忽略一些，或者提供一些没有在这里列举出来的项目。

#### 1.14.3. $_REQUEST

​	`$_REQUEST` 用于收集 HTML 表单提交的数据。

#### 1.14.4. $_POST

​	`$_POST` 被广泛应用于收集表单数据，在 HTML `form` 标签的指定该属性：`method="post"`。

#### 1.14.5. $_GET

​	`$_GET` 用于收集表单数据，也可以收集URL中发送的数据。在 HTML `form` 标签的指定该属性：`method="get"`。

### 1.15. 循环

#### 1.15.1. while 循环

```php
while (condition)
{
  // 要执行的代码
}
```

#### 1.15.2. do...while 语句

​	`do...while` 语句会至少执行一次代码，然后检查条件，只要条件成立，就会重复进行循环。

```php
do
{
  // 要执行的代码
}
while (condition);
```

#### 1.15.3. For 循环

​	`for` 循环用于预先知道脚本需要运行的次数的情况。

```php
for (initial; condition; delta)
{
  // 要执行的代码
}
```

#### 1.15.4. foreach 循环

​	`foreach` 循环用于遍历数组。

```php
// 数值数组
foreach ($array as $value)
{
  // 要执行代码
}
// 键值数组
foreach ($array as $key => $value)
{
  // 要执行代码
}
```

### 1.16. 函数

#### 1.16.1. 内建函数

​	[PHP 参考手册](https://www.runoob.com/php/php-ref-array.html)

#### 1.16.2. 自建函数

```php
<?php 
function functionName() {
  // 要执行的代码 
}
?>
```

#### 1.16.3. 函数参数

​	参数在函数名称后面的括号内指定。

```php
function writeName($fname)
```

#### 1.16.4. 返回值

```php
function func_name() {
	...;
  return $xxx;
}
```

#### 1.16.5. 变量函数

​	在 PHP 中，可以将一个变量作为函数名来调用的函数，这样可以通过变量动态的决定什么时候运行什么函数。

### 1.17. 魔术常量

​	有八个魔术常量它们的值随着它们在代码中的位置改变而改变。

- `__LINE__`：文件当前行；
- `__FILE__`：文件的完整路径和文件名；
- `__DIR__`：文件所在的目录；
- `__FUNCTION__`：函数名称；
- `__CLASS__`：类的名称；

- `__TRAIT__`：特性的名字；
- `__METHOD__`：类的方法名；
- `__NAMESPACE__`：当前命名空间的名称。

### 1.18. 命名空间

#### 1.18.1. 定义命名空间

```php
namespace MyProject;

namespace MyProject1{
  ...;
}

namespace MyProject2{
  ...;
}
```

​	将全局的**非命名空间**中的代码与命名空间中的代码组合在一起，只能使用大括号形式的语法。全局代码必须用一个不带名称的 `namespace` 语句加上大括号括起来。

```php
namespace MyProject{
  ...;
}

namespace { // 全局代码
  ...;
}
```

​	在声明命名空间之前唯一合法的代码是用于定义源文件编码方式的 `declare` 语句。所有非 PHP 代码包括空白符都**不能出现**在命名空间的声明之前。

```php
<?php
declare(encoding='UTF-8');
namespace MyProject {
  ...;
}
?>
```

#### 1.18.2. 子命名空间

​	与目录和文件的关系很像，PHP 命名空间也允许指定层次化的命名空间的名称。

```php
namespace MyProject\Sub\Level;
```

#### 1.18.3. 使用命名空间

##### 为类使用别名

```php
use My\Full\Classname as Another;
// 或者
use My\Full\Classname as Another, My\Full\NSname;
```

##### 为命名空间使用别名

```php
// 下面的例子与 use My\Full\NSname as NSname 相同
use My\Full\NSname;
```

##### 导入全局类

```php
use \ArrayObject;
```

**注意：**全局类与命名空间中的类可以同名，如果不见限定，即使引入了全局类，也会被优先解释为当前命名空间下的类，如果想要使用外部类，需要使用完全限定名称。

### 1.19. 面向对象

#### 1.19.1. 类定义

```php
<?php
class phpClass {
  var $var1;
  var $var2 = "constant string";
  
  function myfunc ($arg1, $arg2) {
     [..]
  }
  [..]
}
?>
```

#### 1.19.2. 创建对象

​	类创建后，可以使用 `new` 运算符来实例化该类的对象。

```php
$phpclass = new phpClass;
```

##### 调用成员方法

```php
$phpclass->myfunc($arg1, $arg2);
```

##### 构造函数

```php
void __construct ([ mixed $args [, $... ]] )
```

##### 析构函数

```php
void __destruct ( void )
```

#### 1.19.3. 继承

​	PHP 使用关键字 `extends` 来继承一个类，但不支持多继承。

```php
class Child extends Parent {
   // 代码部分
}
```

##### 方法重写

​	如果从父类继承的方法不能满足子类的需求，可以对其进行改写，这个过程叫方法的覆盖（override），也称为方法的重写。

##### 访问控制

​	PHP 对属性或方法的访问控制，是通过在前面添加关键字 `public`（公有），`protected`（受保护）或 `private`（私有）来实现的。

- `public`：公有的类成员可以在任何地方被访问；
- `protected`：受保护的类成员则可以被其自身以及其子类和父类访问；
- `private`：私有的类成员则只能被其定义所在的类访问。

**注意：**如果缺省，类的属性和方法均默认为公有。

#### 1.19.4. 接口

​	使用接口（interface），可以指定某个类必须实现哪些方法，但不需要定义这些方法的具体内容。接口是通过 `interface` 关键字来定义的，就像定义一个标准的类一样，但其中定义所有的方法都是空的。接口中定义的所有方法都必须是公有，这是接口的特性。

​	要实现一个接口，使用 `implements` 操作符。类中必须实现接口中定义的所有方法，否则会报一个致命错误。类可以实现多个接口，用逗号来分隔多个接口的名称。

#### 1.19.5. 常量

​	可以把在类中始终保持不变的值定义为常量。在定义和使用常量的时候不需要使用 `$` 符号。常量的值必须是一个定值，不能是变量，类属性，数学运算的结果或函数调用。

#### 1.19.6. 抽象类

​	任何一个类，如果它里面至少有一个方法是被声明为抽象的，那么这个类就必须被声明为抽象的。定义为抽象的类不能被实例化，被定义为抽象的方法只是声明了其调用方式（参数），不能定义其具体的功能实现。

​	继承一个抽象类的时候，子类必须定义父类中的所有抽象方法，另外，这些方法的访问控制必须和父类中一样（或者更为宽松）。

#### 1.19.7. Static 关键字

​	声明类属性或方法为 `static`（静态），就可以不实例化类而直接访问。

**注意：** **静态属性**不能通过一个类已实例化的对象来访问，但**静态方法**可以。

#### 1.19.8. Final 关键字

​	如果父类中的方法被声明为 `final`，则子类无法覆盖该方法。如果一个类被声明为 `final`，则不能被继承。

#### 1.19.9. 调用父类构造方法

​	PHP 不会在子类的构造方法中自动的调用父类的构造方法。要执行父类的构造方法，需要在子类的构造方法中调用 `parent::__construct()` 。

## 2. PHP 高级教程







## 3. PHP 表单

### 3.1. 表单 & 用户输入

​	PHP 中的 `$_GET` 和 `$_POST` 变量用于检索表单中的信息，比如用户输入。



















































